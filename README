EC2 scripts which auto updates itself from git and runs at startup with the help of minimal user-data and cloud init

When starting ec2 add the following user data:

##########################
#!/bin/bash
set -e -x -u

echo"[Credentials]" > ~/.boto
echo"aws_access_key_id = <your access key>" >> ~/.boto
echo"aws_secret_access_key = <your secret key>" >> ~/.boto
export EC2_ARN=arn:aws:sns:eu-west-1:422995397549:saulo_ec2
export EC2_EXTERNAL_SRC=/dev/xvdf
export EC2_EXTERNAL_DST=/mnt/external

yum install -y git

sleep 5

cd ~
git clone git://github.com/sauloal/ec2init.git

sleep 5

cd ec2init
git pull
/bin/bash ~/ec2init/init.sh
#########################

To create your disk:
#format
mke2fs -t ext4 /dev/xvdf
#convert to use 256 byte inodes for greater efficiency
tune2fs -I 256 /dev/xvdf
tune2fs -o journal_data_writeback /dev/xvdf

This script will setup boto, install git and pull this repository.
init.sh will call the remaining init scripts.


Used with AMI:
https://fedoraproject.org/wiki/Cloud_images  			
Fedora-18-ec2-20130105-i386-sda (ami-cafef1be)				
eu-west-1b				
t1.micro				
user	ec2-user			

iSCSI using:
http://www.server-world.info/en/note?os=Fedora_18&p=iscsi&f=1
http://www.chesterproductions.net.nz/blogs/it/sysadmin/configuring-iscsi-targets-and-initiators-on-fedora-16/455/

cloud-init (pre-installed):
http://stackoverflow.com/questions/10125311/how-to-fire-ec2-instances-and-upload-run-a-startup-script-on-each-of-them  		

TODO:
bittorrent sync
darkstat http://unix4lyfe.org/darkstat/
webdav
dynIp
. lamp
v owncloud
x iSCSI
x firewall
x nfs
x samba
x vpn
